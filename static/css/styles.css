
/* Collapsed style for notes/sections */
/* Only hide note/section content, not the title row */
.collapsed-content {
  display: none !important;
}
.note-content {
  display: block;
}

/* Separation between notes */
.note-draggable {
  margin-bottom: 1rem;
  border: 1px solid #e5e7eb;
  box-shadow: 0 1px 2px rgba(0,0,0,0.04);
  background: #fff;
}

/* Separation between sections */
.group\/section {
  margin-bottom: 2.5rem;
  border: 1.5px solid #e5e7eb;
  box-shadow: 0 2px 6px rgba(0,0,0,0.04);
  background: #f9fafb;
}
/* Faded style for completed notes/sections in Content Menu */
.content-menu-completed {
  color: #a3a3a3 !important;
  background-color: #f3f4f6 !important;
  opacity: 0.65 !important;
  text-decoration: line-through !important;
}
/* Style for CURRENT STATE dropdown */
.current-state-dropdown {
    font-size: 0.8rem !important;
    min-width: 400px;
    width: auto;
    max-width: 260px;
    padding-left: 3rem;
    padding-right: 9em;
    height: 2.2rem;
    line-height: 1.2;
}
/* Consistent styling for state tag pills (CURRENT STATE dropdown options) */
.state-tag-pill, .delete-state-btn {
  display: inline-block;
  min-width: 80px;
  max-width: 220px;
  padding: 0.25rem 1rem !important;
  box-sizing: border-box !important;
  border-radius: 9999px !important;
  font-size: 0.92rem !important;
  font-weight: 500 !important;
  line-height: 1.2 !important;
  margin-right: 8px !important;
  border: none;
}
/* Match "+ New Category" and "+ New AND Tag" button styling to state management buttons */
.new-category-btn,
.new-and-tag-btn {
  min-width: 120px !important;
  max-width: 220px !important;
  padding: 0.5rem 1.5rem !important;
  box-sizing: border-box !important;
  border-radius: 9999px !important;
  font-size: 0.92rem !important;
  font-weight: 500 !important;
  line-height: 1.2 !important;
  margin-right: 10px !important;
}
/* Make "+ New State" and "Rename Current State" a little wider */
.new-state-btn,
 .rename-state-btn {
  min-width: 120px !important;
  max-width: 220px !important;
  padding: 0.5rem 1.5rem !important;
  box-sizing: border-box !important;
  border-radius: 9999px !important;
  font-size: 0.5rem !important;
  font-weight: 500 !important;
  line-height: 1.2 !important;
  margin-right: 10px !important;
}
/* Make all state management buttons in the top bar the same height */
.bg-gray-100 .flex.flex-wrap.items-center.gap-4.mb-4.pb-4.border-b button,
.bg-gray-100 .flex.flex-wrap.items-center.gap-4.mb-4.pb-4.border-b form > button {
    min-height: 32px !important;
    height: 32px !important;
    box-sizing: border-box !important;
    padding-top: 0 !important;
    padding-bottom: 0 !important;
    padding-left: 0.75rem !important; 
    padding-right: 0.75rem !important;  
    font-size: 0.8rem !important;
    line-height: 1.2 !important;
}
/* Enforce strict horizontal alignment for state management buttons in the top bar */
.bg-gray-100 .flex.flex-wrap.items-center.gap-4.mb-4.pb-4.border-b {
    display: flex !important;
    flex-direction: row !important;
    align-items: center !important;
    flex-wrap: nowrap !important;
    gap: 0.5rem !important;
    justify-content: flex-start !important;
}
.bg-gray-100 .flex.flex-wrap.items-center.gap-4.mb-4.pb-4.border-b > * {
    margin: 0 !important;
    padding: 0 !important;
    flex: 0 0 auto !important;
    min-width: 0 !important;
}
.bg-gray-100 .flex.flex-wrap.items-center.gap-4.mb-4.pb-4.border-b form {
    display: flex !important;
    align-items: center !important;
    background: none !important;
    border: none !important;
    box-shadow: none !important;
}
/* State management buttons strict alignment */
.state-management-buttons {
    display: table !important;
    width: auto !important;
    border-spacing: 12px 0 !important;
    padding: 0 !important;
    margin: 0 !important;
}

.state-management-buttons > button,
.state-management-buttons > form {
    display: table-cell !important;
    vertical-align: middle !important;
    margin: 0 !important;
    padding: 0 !important;
    float: none !important;
}

.state-management-buttons > form {
    width: auto !important;
    min-width: 0 !important;
    max-width: none !important;
    background: none !important;
    border: none !important;
    box-shadow: none !important;
}
/* Align singular tag hover menu buttons horizontally like AND tags */
.group\/tag .group-hover\/tag\:opacity-100 {
    display: flex !important;
    align-items: center !important;
    gap: 0.25rem !important;
    flex-direction: row !important;
    justify-content: center !important;
    min-width: 70px;
    min-height: 32px;
    padding: 0 !important;
}
.group\/tag .group-hover\/tag\:opacity-100 button,
.group\/tag .group-hover\/tag\:opacity-100 form {
    margin: 0 !important;
    padding: 0 !important;
    display: flex;
    align-items: center;
}
.group\/tag .group-hover\/tag\:opacity-100 svg {
    display: block;
    vertical-align: middle;
}
/* ================================
   Section & Note Action Button Alignment Fix
   ================================ */
.section-action-buttons, .note-action-buttons {
  display: flex;
  align-items: center;
  gap: 0.25rem;
}
.section-action-buttons button, .section-action-buttons form,
.note-action-buttons button, .note-action-buttons form {
  vertical-align: middle !important;
  margin: 0 !important;
  padding: 0 !important;
}
.section-action-buttons svg, .note-action-buttons svg {
  display: block;
  vertical-align: middle;
}

/* ================================
   Section Card Styling
   ================================ */
.group\/section {
  margin-bottom: 2.5rem !important;
  border: 2.5px solid #bfc9d1 !important;
  box-shadow: 0 2px 12px 0 rgba(80, 100, 140, 0.07);
  background: #f8fafc;
  transition: box-shadow 0.2s, border-color 0.2s;
}

.group\/section:hover {
  border-color: #2563eb !important;
  box-shadow: 0 4px 24px 0 rgba(37, 99, 235, 0.10);
  background: #f1f5fa;
}

/* Add more vertical gap between sections */
#content-to-export > .group\/section + .group\/section {
  margin-top: 2.5rem !important;
}
/* --- Note Drag-and-Drop Visual Cues --- */
.note-draggable {
  transition: transform 0.18s cubic-bezier(0.4, 0, 0.2, 1);
  margin-bottom: 1.25rem !important; /* Add vertical separation between notes */
  box-shadow: 0 1px 4px 0 rgba(0,0,0,0.04);
  border: 1px solid #e5e7eb;
  background: #fff;
  border-radius: 0.5rem;
}

.note-draggable.drag-over-top {
  transform: translateY(-18px);
  z-index: 1;
}

.note-draggable.drag-over-bottom {
  transform: translateY(18px);
  z-index: 1;
}

.note-draggable.opacity-50 {
  opacity: 0.5;
}
/* ================================
   TaggingApp - Consolidated Styles
   ================================ */

/* =============
   MODAL STYLES
   ============= */
.modal {
    transition: opacity 0.25s ease;
}

.modal.hidden {
    display: none !important;
}

.modal:not(.hidden) {
    display: flex !important;
}

.modal.opacity-0 {
    opacity: 0;
}

.modal:not(.opacity-0) {
    opacity: 1;
}

.modal-container {
    max-height: 90vh;
    display: flex;
    flex-direction: column;
}

.modal-body {
    overflow-y: auto;
}

/* Class to temporarily allow overflow when pickers are active */
.modal-body.allow-overflow {
    overflow: visible !important;
}

/* =============
   EDITOR STYLES
   ============= */
.ql-editor {
    min-height: 200px;
    overflow-x: hidden; /* Prevent horizontal scrolling from videos */
    
    /* Apply prose styling to match main content view */
    font-size: 0.875rem; /* prose-sm equivalent */
    line-height: 1.7;
    color: #4b5563; /* text-gray-600 equivalent */
    font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
}

/* Apply prose styles directly to both Quill editor content areas */
.ql-editor h1, .ql-editor h2, .ql-editor h3, .ql-editor h4, .ql-editor h5, .ql-editor h6,
#import-editor .ql-editor h1, #import-editor .ql-editor h2, #import-editor .ql-editor h3, 
#import-editor .ql-editor h4, #import-editor .ql-editor h5, #import-editor .ql-editor h6 { 
    margin-top: 1.25em; 
    margin-bottom: 0.5em; 
    font-weight: 600; 
    color: #374151; /* Darker color for headings */
}

.ql-editor h1, #import-editor .ql-editor h1 { font-size: 2em; }
.ql-editor h2, #import-editor .ql-editor h2 { font-size: 1.5em; }
.ql-editor h3, #import-editor .ql-editor h3 { font-size: 1.25em; }
.ql-editor h4, #import-editor .ql-editor h4 { font-size: 1.125em; }
.ql-editor h5, #import-editor .ql-editor h5 { font-size: 1em; }
.ql-editor h6, #import-editor .ql-editor h6 { font-size: 0.875em; }

.ql-editor p, #import-editor .ql-editor p { 
    margin-top: 0.75em; 
    margin-bottom: 0.75em; 
}

.ql-editor ul, .ql-editor ol, #import-editor .ql-editor ul, #import-editor .ql-editor ol { 
    margin-top: 0.75em; 
    margin-bottom: 0.75em; 
    padding-left: 1.5em; 
}

.ql-editor ul, #import-editor .ql-editor ul { 
    list-style-type: disc; 
}

.ql-editor ol, #import-editor .ql-editor ol { 
    list-style-type: decimal; 
}

.ql-editor blockquote, #import-editor .ql-editor blockquote {
    border-left: 4px solid #e5e7eb;
    padding-left: 1em;
    margin: 1em 0;
    font-style: italic;
    color: #6b7280;
}

.ql-editor strong, #import-editor .ql-editor strong {
    font-weight: 600;
}

.ql-editor em, #import-editor .ql-editor em {
    font-style: italic;
}

.ql-editor code, #import-editor .ql-editor code { 
    background-color: #e5e7eb; 
    padding: 0.2em 0.4em; 
    margin: 0; 
    font-size: 85%; 
    border-radius: 3px; 
    font-family: 'Courier New', monospace;
}

.ql-editor img, #import-editor .ql-editor img {
    max-width: 100%;
    height: auto;
    border-radius: 6px;
    margin: 0.5em 0;
}

.ql-editor a, #import-editor .ql-editor a {
    color: #3b82f6;
    text-decoration: underline;
}

.ql-editor a:hover, #import-editor .ql-editor a:hover {
    color: #1d4ed8;
}

/* Ensure import editor inherits same base styling */
#import-editor .ql-editor {
    min-height: 200px;
    overflow-x: hidden;
    font-size: 0.875rem;
    line-height: 1.7;
    color: #4b5563;
    font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
}

/* Font size styles - apply to both editors */
.ql-size-small, #import-editor .ql-size-small {
    font-size: 0.75em;
}

.ql-size-large, #import-editor .ql-size-large {
    font-size: 1.5em;
}

.ql-size-huge, #import-editor .ql-size-huge {
    font-size: 2.5em;
}

/* Additional typography to match main content */
.ql-editor li, #import-editor .ql-editor li {
    margin: 0.25em 0;
    line-height: 1.6;
}

.ql-editor li p, #import-editor .ql-editor li p {
    margin: 0.25em 0;
}

.ql-editor table, #import-editor .ql-editor table {
    border-collapse: collapse;
    width: 100%;
    margin: 1em 0;
}

.ql-editor table td, .ql-editor table th,
#import-editor .ql-editor table td, #import-editor .ql-editor table th {
    border: 1px solid #d1d5db;
    padding: 0.5em;
    text-align: left;
}

.ql-editor table th, #import-editor .ql-editor table th {
    background-color: #f3f4f6;
    font-weight: 600;
}

/* Code block styling - inherit from prose, apply to both editors */
.ql-editor pre.ql-syntax, #import-editor .ql-editor pre.ql-syntax {
    background-color: #e5e7eb; 
    padding: 1em; 
    border-radius: 6px; 
    overflow-x: auto;
    border: 1px solid #d1d5db;
    color: #374151;
    margin: 1em 0;
    font-family: 'Courier New', monospace;
    font-size: 0.875em;
}

.ql-editor pre, #import-editor .ql-editor pre {
    background-color: #e5e7eb; 
    padding: 1em; 
    border-radius: 6px; 
    overflow-x: auto;
    border: 1px solid #d1d5db;
    color: #374151;
    margin: 1em 0;
    font-family: 'Courier New', monospace;
    font-size: 0.875em;
}

/* Apply prose alignment styles to both editors */
.ql-editor .ql-align-center, #import-editor .ql-editor .ql-align-center {
    text-align: center;
}

.ql-editor .ql-align-right, #import-editor .ql-editor .ql-align-right {
    text-align: right;
}

.ql-editor .ql-align-justify, #import-editor .ql-editor .ql-align-justify {
    text-align: justify;
}

.ql-editor img.ql-align-center, #import-editor .ql-editor img.ql-align-center {
    margin-left: auto !important;
    margin-right: auto !important;
    display: block !important;
    float: none !important;
}

.ql-editor img.ql-align-right, #import-editor .ql-editor img.ql-align-right {
    float: right !important;
    margin-left: 1em !important;
    margin-bottom: 0.5em !important;
    margin-right: 0 !important;
    display: inline !important;
}

.ql-editor img.ql-align-left, #import-editor .ql-editor img.ql-align-left {
    float: left !important;
    margin-right: 1em !important;
    margin-bottom: 0.5em !important;
    margin-left: 0 !important;
    display: inline !important;
}

/* Video responsive styling - apply to both editors */
.ql-editor .ql-video, #import-editor .ql-editor .ql-video {
    max-width: 100%;
    height: auto;
    width: 100%;
    /* Ensure videos don't exceed container bounds */
    box-sizing: border-box;
    /* Add responsive video container behavior */
    aspect-ratio: 16/9; /* Default video aspect ratio */
}

/* Video iframe specific styling - apply to both editors */
.ql-editor iframe[src*="youtube"],
.ql-editor iframe[src*="vimeo"],
.ql-editor iframe[src*="youtu.be"],
.ql-editor iframe,
#import-editor .ql-editor iframe[src*="youtube"],
#import-editor .ql-editor iframe[src*="vimeo"],
#import-editor .ql-editor iframe[src*="youtu.be"],
#import-editor .ql-editor iframe {
    max-width: 100% !important;
    width: 100% !important;
    height: auto !important;
    min-height: 200px;
    max-height: 400px;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    box-sizing: border-box;
    display: block;
    margin: 10px 0;
}

/* Responsive video wrapper for better control */
.ql-editor .video-wrapper {
    position: relative;
    width: 100%;
    max-width: 100%;
    padding-bottom: 56.25%; /* 16:9 aspect ratio */
    height: 0;
    overflow: hidden;
    margin: 10px 0;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.ql-editor .video-wrapper iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100% !important;
    height: 100% !important;
    border: none;
    border-radius: 8px;
}

/* Editor container video overflow management */
.ql-editor {
    overflow-x: hidden; /* Prevent horizontal scrolling from videos */
}

/* Ensure video containers don't break editor layout */
.ql-editor > * {
    max-width: 100%;
    box-sizing: border-box;
}

/* Handle video in modal contexts */
.modal-body .ql-editor .video-wrapper {
    max-width: 100%;
    width: 100%;
}

/* Video placeholder styling for better UX */
.ql-editor .video-placeholder {
    width: 100%;
    height: 200px;
    background-color: #f5f5f5;
    border: 2px dashed #ccc;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #666;
    font-size: 14px;
    margin: 10px 0;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

.ql-editor .video-placeholder:hover {
    background-color: #ebebeb;
    border-color: #999;
}

#quill-editor-container .ql-editor,
#html-editor,
#import-editor-container .ql-editor,
#html-import-editor {
    height: 45vh;
    overflow-y: auto;
}

.toggle-btn.active {
    background-color: #2563eb;
    color: white;
}

.file-input-button {
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    padding: 0.5rem 1rem;
    background-color: #4b5563;
    color: white;
    border-radius: 0.375rem;
    transition: background-color 0.2s;
}

.file-input-button:hover {
    background-color: #374151;
}

/* ===================
   QUILL EDITOR ALIGNMENT
   =================== */
.ql-editor p {
    margin-bottom: 0.75em;
    clear: none;
}

.ql-editor img {
    max-width: 100%;
    vertical-align: bottom;
}

.ql-editor .ql-align-left {
    text-align: left;
}

.ql-editor .ql-align-center {
    text-align: center;
}

.ql-editor .ql-align-right {
    text-align: right;
}

.ql-editor .ql-align-justify {
    text-align: justify;
}

.ql-editor img.ql-align-left {
    float: left !important;
    margin-right: 1em !important;
    margin-bottom: 0.5em !important;
    margin-left: 0 !important;
    display: inline !important;
}

.ql-editor img.ql-align-center {
    display: block !important;
    float: none !important;
    margin-left: auto !important;
    margin-right: auto !important;
}

.ql-editor img.ql-align-right {
    float: right !important;
    margin-left: 1em !important;
    margin-bottom: 0.5em !important;
    margin-right: 0 !important;
    display: inline !important;
}

.ql-editor img.quill-image-selected {
    outline: 2px solid #2563eb !important;
    box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.2) !important;
}

/* =============
   PROSE STYLES
   ============= */
.prose h1, .prose h2, .prose h3, .prose h4, .prose h5, .prose h6 { 
    margin-top: 1.25em; 
    margin-bottom: 0.5em; 
    font-weight: 600; 
}

.prose p { 
    margin-top: 0.75em; 
    margin-bottom: 0.75em; 
}

.prose ul, .prose ol { 
    margin-top: 0.75em; 
    margin-bottom: 0.75em; 
    padding-left: 1.5em; 
}

.prose ul { 
    list-style-type: disc; 
}

.prose ol { 
    list-style-type: decimal; 
}

.prose code { 
    background-color: #e5e7eb; 
    padding: 0.2em 0.4em; 
    margin: 0; 
    font-size: 85%; 
    border-radius: 3px; 
}

.prose pre { 
    background-color: #e5e7eb; 
    padding: 1em; 
    border-radius: 6px; 
    overflow-x: auto; 
}

.prose img {
    max-width: 100%;
}

.prose .ql-align-center {
    text-align: center;
}

.prose .ql-align-right {
    text-align: right;
}

.prose .ql-align-justify {
    text-align: justify;
}

.prose img.ql-align-center {
    margin-left: auto !important;
    margin-right: auto !important;
    display: block !important;
    float: none !important;
}

.prose img.ql-align-right {
    float: right !important;
    margin-left: 1em !important;
    margin-bottom: 0.5em !important;
    margin-right: 0 !important;
    display: inline !important;
}

.prose img.ql-align-left {
    float: left !important;
    margin-right: 1em !important;
    margin-bottom: 0.5em !important;
    margin-left: 0 !important;
    display: inline !important;
}

/* =============
   TAG STYLES
   ============= */
.tag-bubble {
    display: inline-flex;
    align-items: center;
    border-radius: 9999px;
    padding: 0.25rem 0.75rem;
    margin-right: 0.5rem;
    margin-bottom: 0.25rem;
    margin-top: 0.25rem;
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    transition: transform 0.1s ease, box-shadow 0.1s ease;
}

.tag-bubble:hover {
    transform: translateY(-1px);
    box-shadow: 0 2px 4px 0 rgba(0,0,0,0.1);
}

.tag-bubble.dragging {
    cursor: grabbing !important;
}

.tag-bubble-all {
    background-color: #e9d5ff;
    color: #5b21b6;
    cursor: default;
}

.tag-bubble.active-filter {
    background-color: #2563eb;
    color: white;
    box-shadow: 0 1px 2px 0 rgba(0,0,0,0.05);
}

.tag-bubble.inactive-filter {
    background-color: #dbeafe;
    color: #1e40af;
    cursor: grab;
}

.and-tag.inactive-filter {
    background-color: #fed7aa;
    color: #9a3412;
}

.and-tag.active-filter {
    background-color: #f97316;
    color: white;
}

.and-tag-component {
    display: inline-block;
    padding: 0.1rem 0.25rem;
    font-size: 0.75rem;
    font-weight: 500;
    line-height: 1;
}

.tag-remove-btn {
    margin-left: 0.5rem;
    width: 1rem;
    height: 1rem;
    border-radius: 9999px;
    background-color: rgba(0,0,0,0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
}

.tag-remove-btn:hover {
    background-color: rgba(0,0,0,0.2);
}

.group-hover\/tag:opacity-100 {
    transition-delay: 150ms;
}

/* ===================
   TAG SUGGESTIONS
   =================== */
.tag-suggestions {
    position: fixed; /* Changed to fixed for viewport-relative positioning */
    min-width: 200px;
    z-index: 10000;
    background-color: white;
    border: 1px solid #d1d5db;
    border-radius: 6px;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    visibility: hidden; /* Initially hidden, will be shown by JS */
    /* Remove max-height and overflow constraints to allow full content display */
}

.tag-suggestions.hidden {
    display: none;
}

#editSectionTagsContainer, #editNoteTagsContainer {
    position: relative;
}

.suggestion-item {
    cursor: pointer;
    padding: 0.75rem 1rem;
    user-select: none;
    border-bottom: 1px solid #f3f4f6;
    transition: background-color 0.15s ease;
    font-size: 0.875rem;
}

.suggestion-item:last-child {
    border-bottom: none;
}

.suggestion-item:hover {
    background-color: #f3f4f6;
}

/* Responsive design for small viewports */
@media (max-height: 600px) {
    .tag-suggestions {
        max-height: 25vh !important;
        overflow-y: auto !important;
    }
    
    .suggestion-item {
        padding: 0.5rem 0.75rem;
        font-size: 0.8rem;
    }
}

@media (max-height: 400px) {
    .tag-suggestions {
        max-height: 20vh !important;
        overflow-y: auto !important;
    }
    
    .suggestion-item {
        padding: 0.4rem 0.6rem;
        font-size: 0.75rem;
    }
}

@media (max-width: 600px) {
    .tag-suggestions {
        min-width: 150px;
        max-width: calc(100vw - 20px) !important;
        left: 10px !important;
        right: 10px !important;
        width: auto !important;
    }
    
    .suggestion-item {
        padding: 0.6rem 0.8rem;
        font-size: 0.8rem;
    }
}

@media (max-width: 400px) {
    .tag-suggestions {
        min-width: 120px;
        border-radius: 4px;
    }
    
    .suggestion-item {
        padding: 0.5rem 0.6rem;
        font-size: 0.75rem;
    }
}

/* ===================
   DRAG AND DROP
   =================== */
.dropzone {
    border: 1px dashed transparent;
    transition: border-color 0.2s ease-in-out;
}

.dropzone.drag-over {
    border-color: #2563eb;
    background-color: #eff6ff;
}

/* --- Note Drag-and-Drop Animation --- */
.note-draggable {
  transition: transform 0.18s cubic-bezier(0.4,0,0.2,1), box-shadow 0.18s;
  will-change: transform;
}
.note-draggable.drag-over-top {
  transform: translateY(12px);
  box-shadow: 0 8px 16px -8px #a7f3d0;
  z-index: 2;
}
.note-draggable.drag-over-bottom {
  transform: translateY(-12px);
  box-shadow: 0 -8px 16px -8px #a7f3d0;
  z-index: 2;
}

/* ===================
   TOOLBAR TOOLTIPS
   =================== */
/* Ensure tooltips work on Quill toolbar elements */
.ql-toolbar button[title],
.ql-toolbar .ql-picker-label[title] {
    /* Ensure tooltips are not blocked */
    position: relative;
    z-index: 1;
}

/* Make sure no other styles are preventing tooltips */
.ql-toolbar button,
.ql-toolbar .ql-picker-label {
    /* Allow tooltips to show */
    pointer-events: auto !important;
}

/* ===================
   COMPACT TOOLBAR STYLES
   =================== */
.ql-toolbar-compact {
    padding: 8px 12px !important;
    border-bottom: 1px solid #ccc;
}

.ql-toolbar-compact .ql-formats {
    margin-right: 8px !important;
}

.ql-toolbar-compact .ql-formats:last-child {
    margin-right: 0 !important;
}

.ql-toolbar-compact button {
    width: 28px !important;
    height: 28px !important;
    padding: 3px !important;
    margin-right: 2px !important;
}

.ql-toolbar-compact button:last-child {
    margin-right: 0 !important;
}

.ql-toolbar-compact select {
    height: 28px !important;
    padding: 2px 4px !important;
    margin-right: 2px !important;
    font-size: 12px !important;
}

.ql-toolbar-compact select:last-child {
    margin-right: 0 !important;
}

.ql-toolbar-compact .ql-picker-label {
    height: 28px !important;
    line-height: 28px !important;
    padding: 2px 4px !important;
}

.ql-toolbar-compact .ql-picker-options {
    top: 28px !important;
}

/* Ensure toolbar doesn't wrap */
.ql-toolbar-compact {
    white-space: nowrap;
    overflow-x: auto;
    overflow-y: hidden;
}

/* Smaller font size for compact look */
.ql-toolbar-compact {
    font-size: 13px;
}

/* ===================
   QUILL PICKER FIX - CLICK ONLY, ALWAYS BELOW
   =================== */

/* DISABLE Quill's default picker behavior for ALL pickers */
.ql-picker.ql-expanded .ql-picker-options {
    display: none !important; /* Disable Quill's default expanded behavior */
    visibility: hidden !important;
}

/* Hide ALL picker options by default - only our click will show them */
.ql-picker .ql-picker-options {
    display: none !important; /* Hidden by default */
    visibility: hidden !important;
    z-index: -1 !important; 
    position: fixed !important;
    top: -9999px !important;
    left: -9999px !important;
    opacity: 0 !important;
}

/* Show picker options ONLY when we explicitly set them visible via JavaScript */
.ql-picker .ql-picker-options.picker-visible,
.ql-picker .ql-picker-options.color-picker-visible {
    display: block !important; /* Show when we add our class */
    visibility: visible !important;
    z-index: 99999 !important;
    position: fixed !important;
    transform: none !important; /* Prevent any transforms */
    clip: none !important; /* Prevent clipping */
    overflow: visible !important;
    opacity: 1 !important;
    /* Force remove any positioning that could interfere */
    bottom: auto !important;
    right: auto !important;
    margin: 0 !important;
}

/* Color picker specific styles */
.ql-color-picker .ql-picker-options.color-picker-visible,
.ql-background .ql-picker-options.color-picker-visible {
    display: flex !important; /* Show when we add our class */
    flex-wrap: wrap !important;
    padding: 8px !important; /* Only allow our intended padding */
}

/* Dropdown picker specific styles */
.ql-header .ql-picker-options.picker-visible,
.ql-font .ql-picker-options.picker-visible,
.ql-size .ql-picker-options.picker-visible {
    display: block !important;
    max-height: 200px !important;
    overflow-y: auto !important;
    padding: 0 !important;
    background: white !important;
    border: 1px solid #d1d5db !important;
    border-radius: 6px !important;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05) !important;
}

/* Dropdown picker item styles */
.ql-header .ql-picker-options.picker-visible .ql-picker-item,
.ql-font .ql-picker-options.picker-visible .ql-picker-item,
.ql-size .ql-picker-options.picker-visible .ql-picker-item {
    padding: 8px 12px !important;
    cursor: pointer !important;
    border: none !important;
    background: white !important;
    color: #333 !important;
    text-align: left !important;
    width: 100% !important;
    box-sizing: border-box !important;
    display: block !important;
}

.ql-header .ql-picker-options.picker-visible .ql-picker-item:hover,
.ql-font .ql-picker-options.picker-visible .ql-picker-item:hover,
.ql-size .ql-picker-options.picker-visible .ql-picker-item:hover {
    background-color: #f0f0f0 !important;
}

.ql-header .ql-picker-options.picker-visible .ql-picker-item.ql-selected,
.ql-font .ql-picker-options.picker-visible .ql-picker-item.ql-selected,
.ql-size .ql-picker-options.picker-visible .ql-picker-item.ql-selected {
    background-color: #e3f2fd !important;
    color: #1976d2 !important;
}

/* Font family preview in dropdown */
.ql-font .ql-picker-options.picker-visible .ql-picker-item[data-value="serif"] {
    font-family: Georgia, "Times New Roman", serif !important;
}

.ql-font .ql-picker-options.picker-visible .ql-picker-item[data-value="monospace"] {
    font-family: Monaco, "Courier New", monospace !important;
}

.ql-font .ql-picker-options.picker-visible .ql-picker-item[data-value="arial"] {
    font-family: Arial, sans-serif !important;
}

.ql-font .ql-picker-options.picker-visible .ql-picker-item[data-value="times"] {
    font-family: "Times New Roman", serif !important;
}

.ql-font .ql-picker-options.picker-visible .ql-picker-item[data-value="georgia"] {
    font-family: Georgia, serif !important;
}

.ql-font .ql-picker-options.picker-visible .ql-picker-item[data-value="helvetica"] {
    font-family: Helvetica, Arial, sans-serif !important;
}

.ql-font .ql-picker-options.picker-visible .ql-picker-item[data-value="comic"] {
    font-family: "Comic Sans MS", cursive !important;
}

.ql-font .ql-picker-options.picker-visible .ql-picker-item[data-value="impact"] {
    font-family: Impact, sans-serif !important;
}

.ql-font .ql-picker-options.picker-visible .ql-picker-item[data-value="verdana"] {
    font-family: Verdana, sans-serif !important;
}

.ql-font .ql-picker-options.picker-visible .ql-picker-item[data-value="tahoma"] {
    font-family: Tahoma, sans-serif !important;
}

.ql-font .ql-picker-options.picker-visible .ql-picker-item[data-value="trebuchet"] {
    font-family: "Trebuchet MS", sans-serif !important;
}

.ql-font .ql-picker-options.picker-visible .ql-picker-item[data-value="palatino"] {
    font-family: Palatino, serif !important;
}

.ql-font .ql-picker-options.picker-visible .ql-picker-item[data-value="courier"] {
    font-family: "Courier New", monospace !important;
}

.ql-font .ql-picker-options.picker-visible .ql-picker-item[data-value="lucida"] {
    font-family: "Lucida Console", monospace !important;
}

/* Ensure no Quill defaults interfere with any pickers - MAXIMUM specificity */
html body .ql-toolbar.ql-snow .ql-picker .ql-picker-options.picker-visible,
html body .ql-toolbar.ql-snow .ql-picker .ql-picker-options.color-picker-visible,
html body .ql-snow .ql-toolbar .ql-picker .ql-picker-options.picker-visible,
html body .ql-snow .ql-toolbar .ql-picker .ql-picker-options.color-picker-visible {
    display: block !important;
    visibility: visible !important;
    z-index: 99999 !important;
    position: fixed !important;
    transform: none !important;
    clip: none !important;
    overflow: visible !important;
    opacity: 1 !important;
}
html body .ql-snow .ql-toolbar .ql-background .ql-picker-options.color-picker-visible,
html body .modal .ql-color-picker .ql-picker-options.color-picker-visible,
html body .modal .ql-background .ql-picker-options.color-picker-visible {
    z-index: 99999 !important;
    display: flex !important;
    position: fixed !important;
    visibility: visible !important;
    transform: none !important;
    bottom: auto !important;
    right: auto !important;
    margin: 0 !important;
    opacity: 1 !important;
}

/* FORCE HIDE only color/background picker options that don't have our visible class */
html body .ql-toolbar.ql-snow .ql-color-picker .ql-picker-options:not(.color-picker-visible),
html body .ql-toolbar.ql-snow .ql-background .ql-picker-options:not(.color-picker-visible),
html body .ql-snow .ql-toolbar .ql-color-picker .ql-picker-options:not(.color-picker-visible),
html body .ql-snow .ql-toolbar .ql-background .ql-picker-options:not(.color-picker-visible),
html body .modal .ql-color-picker .ql-picker-options:not(.color-picker-visible),
html body .modal .ql-background .ql-picker-options:not(.color-picker-visible) {
    display: none !important;
    visibility: hidden !important;
    z-index: -1 !important;
    position: fixed !important;
    top: -9999px !important;
    left: -9999px !important;
    opacity: 0 !important;
}

/* Ensure other dropdowns (header, font family, font size) work normally with high z-index */
html body .ql-toolbar.ql-snow .ql-picker:not(.ql-color-picker):not(.ql-background).ql-expanded .ql-picker-options,
html body .ql-snow .ql-toolbar .ql-picker:not(.ql-color-picker):not(.ql-background).ql-expanded .ql-picker-options,
html body .modal .ql-picker:not(.ql-color-picker):not(.ql-background).ql-expanded .ql-picker-options {
    display: block !important;
    visibility: visible !important;
    z-index: 99999 !important;
    position: absolute !important;
    background: white !important;
    border: 1px solid #ccc !important;
    border-radius: 4px !important;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15) !important;
}

/* Color Picker Grid Layout - Smaller fixed width with ~6 colors per row */
.ql-color-picker .ql-picker-options,
.ql-background .ql-picker-options {
    width: 180px !important; /* Reduced width for ~6 colors per row */
    min-width: 180px !important;
    max-width: 180px !important;
    display: flex !important;
    flex-wrap: wrap !important;
    padding: 8px !important;
    box-sizing: border-box !important;
    background: white !important;
    border: 1px solid #ccc !important;
    border-radius: 4px !important;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15) !important;
}

/* Color picker items in grid layout */
.ql-color-picker .ql-picker-options .ql-picker-item,
.ql-background .ql-picker-options .ql-picker-item {
    width: 24px !important;
    height: 24px !important;
    margin: 2px !important;
    border: 1px solid #ddd !important;
    border-radius: 3px !important;
    cursor: pointer !important;
    flex-shrink: 0 !important;
    box-sizing: border-box !important;
}

/* Hover effect for color items */
.ql-color-picker .ql-picker-options .ql-picker-item:hover,
.ql-background .ql-picker-options .ql-picker-item:hover {
    border-color: #666 !important;
    transform: scale(1.1) !important;
    transition: all 0.1s ease !important;
    z-index: 1 !important;
    position: relative !important;
}

/* Selected color item */
.ql-color-picker .ql-picker-options .ql-picker-item.ql-selected,
.ql-background .ql-picker-options .ql-picker-item.ql-selected {
    border-color: #06c !important;
    border-width: 2px !important;
    box-shadow: 0 0 0 1px #06c !important;
}

/* Responsive: allow horizontal scroll on very small screens */
@media (max-width: 768px) {
    .ql-toolbar-compact {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }
    
    /* Even smaller color picker on mobile */
    .ql-color-picker .ql-picker-options,
    .ql-background .ql-picker-options {
        width: 150px !important; /* 5 colors per row on mobile */
        min-width: 150px !important;
        max-width: 150px !important;
    }
    
    .ql-color-picker .ql-picker-options .ql-picker-item,
    .ql-background .ql-picker-options .ql-picker-item {
        width: 22px !important;
        height: 22px !important;
    }
}

/* =============
   QUILL INDENTATION STYLES
   ============= */
/* Text indentation levels - matches Quill's ql-indent-* classes */
.ql-indent-1 {
    padding-left: 3em !important;
}

.ql-indent-2 {
    padding-left: 6em !important;
}

.ql-indent-3 {
    padding-left: 9em !important;
}

.ql-indent-4 {
    padding-left: 12em !important;
}

.ql-indent-5 {
    padding-left: 15em !important;
}

.ql-indent-6 {
    padding-left: 18em !important;
}

.ql-indent-7 {
    padding-left: 21em !important;
}

.ql-indent-8 {
    padding-left: 24em !important;
}

/* Apply indentation in both editor and display contexts */
.ql-editor .ql-indent-1,
.content-display .ql-indent-1,
.note-content .ql-indent-1 {
    padding-left: 3em !important;
}

.ql-editor .ql-indent-2,
.content-display .ql-indent-2,
.note-content .ql-indent-2 {
    padding-left: 6em !important;
}

.ql-editor .ql-indent-3,
.content-display .ql-indent-3,
.note-content .ql-indent-3 {
    padding-left: 9em !important;
}

.ql-editor .ql-indent-4,
.content-display .ql-indent-4,
.note-content .ql-indent-4 {
    padding-left: 12em !important;
}

.ql-editor .ql-indent-5,
.content-display .ql-indent-5,
.note-content .ql-indent-5 {
    padding-left: 15em !important;
}

.ql-editor .ql-indent-6,
.content-display .ql-indent-6,
.note-content .ql-indent-6 {
    padding-left: 18em !important;
}

.ql-editor .ql-indent-7,
.content-display .ql-indent-7,
.note-content .ql-indent-7 {
    padding-left: 21em !important;
}

.ql-editor .ql-indent-8,
.content-display .ql-indent-8,
.note-content .ql-indent-8 {
    padding-left: 24em !important;
}

/* Mobile responsive indentation - smaller indents on small screens */
@media (max-width: 768px) {
    .ql-indent-1 { padding-left: 1.5em !important; }
    .ql-indent-2 { padding-left: 3em !important; }
    .ql-indent-3 { padding-left: 4.5em !important; }
    .ql-indent-4 { padding-left: 6em !important; }
    .ql-indent-5 { padding-left: 7.5em !important; }
    .ql-indent-6 { padding-left: 9em !important; }
    .ql-indent-7 { padding-left: 10.5em !important; }
    .ql-indent-8 { padding-left: 12em !important; }
    
    .ql-editor .ql-indent-1,
    .content-display .ql-indent-1,
    .note-content .ql-indent-1 { padding-left: 1.5em !important; }
    
    .ql-editor .ql-indent-2,
    .content-display .ql-indent-2,
    .note-content .ql-indent-2 { padding-left: 3em !important; }
    
    .ql-editor .ql-indent-3,
    .content-display .ql-indent-3,
    .note-content .ql-indent-3 { padding-left: 4.5em !important; }
    
    .ql-editor .ql-indent-4,
    .content-display .ql-indent-4,
    .note-content .ql-indent-4 { padding-left: 6em !important; }
    
    .ql-editor .ql-indent-5,
    .content-display .ql-indent-5,
    .note-content .ql-indent-5 { padding-left: 7.5em !important; }
    
    .ql-editor .ql-indent-6,
    .content-display .ql-indent-6,
    .note-content .ql-indent-6 { padding-left: 9em !important; }
    
    .ql-editor .ql-indent-7,
    .content-display .ql-indent-7,
    .note-content .ql-indent-7 { padding-left: 10.5em !important; }
    
    .ql-editor .ql-indent-8,
    .content-display .ql-indent-8,
    .note-content .ql-indent-8 { padding-left: 12em !important; }
}

/* Font family styles */
.ql-font-serif {
    font-family: Georgia, "Times New Roman", serif;
}

.ql-font-monospace {
    font-family: Monaco, "Courier New", monospace;
}

.ql-font-arial {
    font-family: Arial, sans-serif;
}

.ql-font-times {
    font-family: "Times New Roman", serif;
}

.ql-font-georgia {
    font-family: Georgia, serif;
}

.ql-font-helvetica {
    font-family: Helvetica, Arial, sans-serif;
}

.ql-font-comic {
    font-family: "Comic Sans MS", cursive;
}

.ql-font-impact {
    font-family: Impact, sans-serif;
}

.ql-font-verdana {
    font-family: Verdana, sans-serif;
}

.ql-font-tahoma {
    font-family: Tahoma, sans-serif;
}

.ql-font-trebuchet {
    font-family: "Trebuchet MS", sans-serif;
}

.ql-font-palatino {
    font-family: Palatino, serif;
}

.ql-font-courier {
    font-family: "Courier New", monospace;
}

.ql-font-lucida {
    font-family: "Lucida Console", monospace;
}

/* Responsive video handling for different screen sizes */
@media (max-width: 768px) {
    .ql-editor .video-wrapper {
        padding-bottom: 56.25%; /* Maintain 16:9 aspect ratio on mobile */
        margin: 5px 0;
    }
    
    .ql-editor iframe {
        min-height: 180px;
        max-height: 250px;
    }
}

@media (max-width: 480px) {
    .ql-editor .video-wrapper {
        padding-bottom: 60%; /* Slightly taller on very small screens */
        margin: 5px 0;
    }
    
    .ql-editor iframe {
        min-height: 150px;
        max-height: 200px;
    }
}

/* Ensure videos don't break out of their containers */
.ql-editor .video-wrapper,
.ql-editor iframe {
    contain: layout style;
}

/* Link styling and viewport management */
.ql-editor a {
    color: #2563eb;
    text-decoration: underline;
    /* Allow font changes while maintaining baseline styling */
    vertical-align: baseline;
    /* Prevent links from exceeding viewport */
    word-wrap: break-word;
    word-break: break-word;
    overflow-wrap: break-word;
    /* Ensure links don't cause horizontal scrolling */
    max-width: 100%;
    display: inline;
    box-sizing: border-box;
    /* Add some visual feedback */
    transition: color 0.2s ease;
    /* Prevent any positioning that might cause subscript appearance */
    position: relative;
    top: 0;
    bottom: 0;
}

.ql-editor a:hover {
    color: #1d4ed8;
    text-decoration: none;
}

.ql-editor a:visited {
    color: #7c3aed;
}

/* Handle very long URLs */
.ql-editor a[href*="://"] {
    /* Break long URLs appropriately */
    word-break: break-all;
    overflow-wrap: anywhere;
    /* Ensure they don't exceed container width */
    max-width: 100%;
    white-space: normal;
}

/* Link styling in different contexts */
.ql-editor p a,
.ql-editor div a,
.ql-editor span a {
    /* Ensure inline links don't break layout while allowing font changes */
    max-width: 100%;
    vertical-align: baseline;
    display: inline;
}

/* Show full URL on hover for truncated links */
.ql-editor a[title] {
    position: relative;
}

.ql-editor a[title]:hover::after {
    content: attr(title);
    position: absolute;
    bottom: 100%;
    left: 0;
    background: #333;
    color: white;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    white-space: nowrap;
    z-index: 1000;
    max-width: 300px;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Additional link context handling */
.ql-editor blockquote a,
.ql-editor li a,
.ql-editor h1 a,
.ql-editor h2 a,
.ql-editor h3 a,
.ql-editor h4 a,
.ql-editor h5 a,
.ql-editor h6 a {
    /* Links in special contexts */
    word-wrap: break-word;
    overflow-wrap: break-word;
    max-width: 100%;
    /* Allow font changes while maintaining baseline alignment */
    vertical-align: baseline;
    display: inline;
}

/* Ensure links don't interfere with editor layout */
.ql-editor {
    /* Prevent links from causing horizontal overflow */
    overflow-wrap: break-word;
    word-wrap: break-word;
}

/* Handle link selection and editing */
.ql-editor a:focus {
    outline: 2px solid #2563eb;
    outline-offset: 2px;
    border-radius: 2px;
}

/* Link in code blocks should be handled differently */
.ql-editor pre a,
.ql-editor code a {
    word-break: break-all;
    font-family: inherit;
    background: rgba(37, 99, 235, 0.1);
    padding: 1px 3px;
    border-radius: 3px;
}

/* Ensure proper spacing around links */
.ql-editor a {
    margin: 0 1px;
}

/* Handle link tooltips better */
.ql-editor a[title]:hover::after {
    /* Ensure tooltip doesn't go off-screen */
    max-width: min(300px, 90vw);
    left: 0;
    transform: translateX(-50%);
    left: 50%;
    pointer-events: none;
    z-index: 10000;
}

/* Main content view link styling */
.prose a,
.prose-sm a {
    color: #2563eb !important;
    text-decoration: underline !important;
    /* Allow font changes while maintaining baseline styling */
    vertical-align: baseline !important;
    word-wrap: break-word !important;
    word-break: break-word !important;
    overflow-wrap: break-word !important;
    max-width: 100% !important;
    display: inline !important;
    box-sizing: border-box !important;
    transition: color 0.2s ease !important;
    position: relative !important;
    top: 0 !important;
    bottom: 0 !important;
}

.prose a:hover,
.prose-sm a:hover {
    color: #1d4ed8 !important;
    text-decoration: none !important;
}

.prose a:visited,
.prose-sm a:visited {
    color: #7c3aed !important;
}

/* Ensure prose doesn't override our link styles */
.prose a[href],
.prose-sm a[href] {
    color: #2563eb !important;
    text-decoration: underline !important;
    /* Allow font changes */
}

.prose a[href]:hover,
.prose-sm a[href]:hover {
    color: #1d4ed8 !important;
    text-decoration: none !important;
}

/* Handle any specific prose selectors that might interfere */
.prose > * a,
.prose-sm > * a {
    color: #2563eb !important;
    text-decoration: underline !important;
    /* Allow font changes */
}

/* Ensure links work in all prose contexts */
.prose p a,
.prose div a,
.prose span a,
.prose li a,
.prose h1 a,
.prose h2 a,
.prose h3 a,
.prose h4 a,
.prose h5 a,
.prose h6 a,
.prose blockquote a,
.prose-sm p a,
.prose-sm div a,
.prose-sm span a,
.prose-sm li a,
.prose-sm h1 a,
.prose-sm h2 a,
.prose-sm h3 a,
.prose-sm h4 a,
.prose-sm h5 a,
.prose-sm h6 a,
.prose-sm blockquote a {
    color: #2563eb !important;
    text-decoration: underline !important;
    /* Allow font changes while maintaining baseline styling */
    vertical-align: baseline !important;
    display: inline !important;
    word-wrap: break-word !important;
    word-break: break-word !important;
    overflow-wrap: break-word !important;
    max-width: 100% !important;
}

.prose p a:hover,
.prose div a:hover,
.prose span a:hover,
.prose li a:hover,
.prose h1 a:hover,
.prose h2 a:hover,
.prose h3 a:hover,
.prose h4 a:hover,
.prose h5 a:hover,
.prose h6 a:hover,
.prose blockquote a:hover,
.prose-sm p a:hover,
.prose-sm div a:hover,
.prose-sm span a:hover,
.prose-sm li a:hover,
.prose-sm h1 a:hover,
.prose-sm h2 a:hover,
.prose-sm h3 a:hover,
.prose-sm h4 a:hover,
.prose-sm h5 a:hover,
.prose-sm h6 a:hover,
.prose-sm blockquote a:hover {
    color: #1d4ed8 !important;
    text-decoration: none !important;
}

/* General content area link styling */
.note-content a,
.content-display a,
.text-gray-600 a {
    color: #2563eb !important;
    text-decoration: underline !important;
    /* Allow font changes while maintaining baseline styling */
    vertical-align: baseline !important;
    word-wrap: break-word !important;
    word-break: break-word !important;
    overflow-wrap: break-word !important;
    max-width: 100% !important;
    display: inline !important;
    box-sizing: border-box !important;
    transition: color 0.2s ease !important;
    position: relative !important;
    top: 0 !important;
    bottom: 0 !important;
}

.note-content a:hover,
.content-display a:hover,
.text-gray-600 a:hover {
    color: #1d4ed8 !important;
    text-decoration: none !important;
}

.note-content a:visited,
.content-display a:visited,
.text-gray-600 a:visited {
    color: #7c3aed !important;
}

/* Ensure links work in any div that might contain content */
div[class*="text-gray"] a,
div[class*="prose"] a,
div[class*="content"] a {
    color: #2563eb !important;
    text-decoration: underline !important;
    /* Allow font changes while maintaining baseline styling */
    vertical-align: baseline !important;
    display: inline !important;
    word-wrap: break-word !important;
    word-break: break-word !important;
    overflow-wrap: break-word !important;
    max-width: 100% !important;
}

div[class*="text-gray"] a:hover,
div[class*="prose"] a:hover,
div[class*="content"] a:hover {
    color: #1d4ed8 !important;
    text-decoration: none !important;
}

/* FORCE links to allow independent font styling - override all possible inheritance */
.ql-editor a,
.ql-editor a *,
.ql-editor * a {
    font-size: unset !important;
    font-family: unset !important;
    font-weight: unset !important;
    line-height: unset !important;
}

/* Apply font formats to links when explicitly set */
.ql-editor a.ql-font-serif { font-family: Georgia, "Times New Roman", serif !important; }
.ql-editor a.ql-font-monospace { font-family: Monaco, "Courier New", monospace !important; }
.ql-editor a.ql-font-arial { font-family: Arial, sans-serif !important; }
.ql-editor a.ql-font-times { font-family: "Times New Roman", serif !important; }
.ql-editor a.ql-font-georgia { font-family: Georgia, serif !important; }
.ql-editor a.ql-font-helvetica { font-family: Helvetica, Arial, sans-serif !important; }
.ql-editor a.ql-font-comic { font-family: "Comic Sans MS", cursive !important; }
.ql-editor a.ql-font-impact { font-family: Impact, sans-serif !important; }
.ql-editor a.ql-font-verdana { font-family: Verdana, sans-serif !important; }
.ql-editor a.ql-font-tahoma { font-family: Tahoma, sans-serif !important; }
.ql-editor a.ql-font-trebuchet { font-family: "Trebuchet MS", sans-serif !important; }
.ql-editor a.ql-font-palatino { font-family: Palatino, serif !important; }
.ql-editor a.ql-font-courier { font-family: "Courier New", monospace !important; }
.ql-editor a.ql-font-lucida { font-family: "Lucida Console", monospace !important; }

/* Apply size formats to links when explicitly set */
.ql-editor a.ql-size-small { font-size: 0.75em !important; }
.ql-editor a.ql-size-large { font-size: 1.5em !important; }
.ql-editor a.ql-size-huge { font-size: 2.5em !important; }

/* Reset any parent font styling that might interfere */
.ql-editor [class*="ql-font"] a,
.ql-editor [class*="ql-size"] a {
    font-family: unset !important;
    font-size: unset !important;
}

/* FORCE links in content view to allow independent font styling */
.prose a,
.prose-sm a,
.note-content a,
.content-display a,
.text-gray-600 a {
    font-size: unset !important;
    font-family: unset !important;
    font-weight: unset !important;
    line-height: unset !important;
}

/* Apply font formats to links in content view when explicitly set */
.prose a.ql-font-serif,
.prose-sm a.ql-font-serif,
.note-content a.ql-font-serif,
.content-display a.ql-font-serif,
.text-gray-600 a.ql-font-serif { font-family: Georgia, "Times New Roman", serif !important; }

.prose a.ql-font-monospace,
.prose-sm a.ql-font-monospace,
.note-content a.ql-font-monospace,
.content-display a.ql-font-monospace,
.text-gray-600 a.ql-font-monospace { font-family: Monaco, "Courier New", monospace !important; }

.prose a.ql-font-arial,
.prose-sm a.ql-font-arial,
.note-content a.ql-font-arial,
.content-display a.ql-font-arial,
.text-gray-600 a.ql-font-arial { font-family: Arial, sans-serif !important; }

.prose a.ql-font-times,
.prose-sm a.ql-font-times,
.note-content a.ql-font-times,
.content-display a.ql-font-times,
.text-gray-600 a.ql-font-times { font-family: "Times New Roman", serif !important; }

.prose a.ql-font-georgia,
.prose-sm a.ql-font-georgia,
.note-content a.ql-font-georgia,
.content-display a.ql-font-georgia,
.text-gray-600 a.ql-font-georgia { font-family: Georgia, serif !important; }

.prose a.ql-font-helvetica,
.prose-sm a.ql-font-helvetica,
.note-content a.ql-font-helvetica,
.content-display a.ql-font-helvetica,
.text-gray-600 a.ql-font-helvetica { font-family: Helvetica, Arial, sans-serif !important; }

.prose a.ql-font-comic,
.prose-sm a.ql-font-comic,
.note-content a.ql-font-comic,
.content-display a.ql-font-comic,
.text-gray-600 a.ql-font-comic { font-family: "Comic Sans MS", cursive !important; }

.prose a.ql-font-impact,
.prose-sm a.ql-font-impact,
.note-content a.ql-font-impact,
.content-display a.ql-font-impact,
.text-gray-600 a.ql-font-impact { font-family: Impact, sans-serif !important; }

.prose a.ql-font-verdana,
.prose-sm a.ql-font-verdana,
.note-content a.ql-font-verdana,
.content-display a.ql-font-verdana,
.text-gray-600 a.ql-font-verdana { font-family: Verdana, sans-serif !important; }

.prose a.ql-font-tahoma,
.prose-sm a.ql-font-tahoma,
.note-content a.ql-font-tahoma,
.content-display a.ql-font-tahoma,
.text-gray-600 a.ql-font-tahoma { font-family: Tahoma, sans-serif !important; }

.prose a.ql-font-trebuchet,
.prose-sm a.ql-font-trebuchet,
.note-content a.ql-font-trebuchet,
.content-display a.ql-font-trebuchet,
.text-gray-600 a.ql-font-trebuchet { font-family: "Trebuchet MS", sans-serif !important; }

.prose a.ql-font-palatino,
.prose-sm a.ql-font-palatino,
.note-content a.ql-font-palatino,
.content-display a.ql-font-palatino,
.text-gray-600 a.ql-font-palatino { font-family: Palatino, serif !important; }

.prose a.ql-font-courier,
.prose-sm a.ql-font-courier,
.note-content a.ql-font-courier,
.content-display a.ql-font-courier,
.text-gray-600 a.ql-font-courier { font-family: "Courier New", monospace !important; }

.prose a.ql-font-lucida,
.prose-sm a.ql-font-lucida,
.note-content a.ql-font-lucida,
.content-display a.ql-font-lucida,
.text-gray-600 a.ql-font-lucida { font-family: "Lucida Console", monospace !important; }

/* Apply size formats to links in content view when explicitly set */
.prose a.ql-size-small,
.prose-sm a.ql-size-small,
.note-content a.ql-size-small,
.content-display a.ql-size-small,
.text-gray-600 a.ql-size-small { font-size: 0.75em !important; }

.prose a.ql-size-large,
.prose-sm a.ql-size-large,
.note-content a.ql-size-large,
.content-display a.ql-size-large,
.text-gray-600 a.ql-size-large { font-size: 1.5em !important; }

.prose a.ql-size-huge,
.prose-sm a.ql-size-huge,
.note-content a.ql-size-huge,
.content-display a.ql-size-huge,
.text-gray-600 a.ql-size-huge { font-size: 2.5em !important; }

/* Blockquote styling for editor */
.ql-editor blockquote {
    border-left: 4px solid #e2e8f0;
    padding-left: 16px;
    margin: 16px 0;
    font-style: italic;
    color: #64748b;
    background-color: #f8fafc;
    padding: 12px 16px;
    border-radius: 4px;
}

/* Blockquote styling for main content view */
.prose blockquote,
.prose-sm blockquote,
.note-content blockquote,
.content-display blockquote,
.text-gray-600 blockquote {
    border-left: 4px solid #e2e8f0 !important;
    padding-left: 16px !important;
    margin: 16px 0 !important;
    font-style: italic !important;
    color: #64748b !important;
    background-color: #f8fafc !important;
    padding: 12px 16px !important;
    border-radius: 4px !important;
    font-size: inherit !important;
    font-family: inherit !important;
    line-height: 1.6 !important;
}

/* Ensure blockquotes work in any content context */
div[class*="text-gray"] blockquote,
div[class*="prose"] blockquote,
div[class*="content"] blockquote {
    border-left: 4px solid #e2e8f0 !important;
    padding-left: 16px !important;
    margin: 16px 0 !important;
    font-style: italic !important;
    color: #64748b !important;
    background-color: #f8fafc !important;
    padding: 12px 16px !important;
    border-radius: 4px !important;
    font-size: inherit !important;
    line-height: 1.6 !important;
}

/* Blockquote content styling */
.ql-editor blockquote p,
.prose blockquote p,
.prose-sm blockquote p,
.note-content blockquote p,
.content-display blockquote p,
.text-gray-600 blockquote p {
    margin: 0 !important;
    padding: 0 !important;
    font-style: inherit !important;
    color: inherit !important;
}

/* Category tag styling */
.tag-bubble.category-tag {
    background-color: #ecfdf5;
    color: #047857;
    border: 1px solid #a7f3d0;
    font-weight: 600;
}

.tag-bubble.category-tag:hover {
    background-color: #d1fae5;
    border-color: #6ee7b7;
}

.tag-bubble.category-tag.active-filter {
    background-color: #059669;
    color: white;
    border-color: #047857;
}

.tag-bubble.category-tag.inactive-filter {
    background-color: #ecfdf5;
    color: #047857;
    border: 1px solid #a7f3d0;
}

/* Category tag icon */
.category-tag-icon {
    margin-right: 0.25rem;
    font-size: 0.875rem;
}

.note-completed {
  background: #e5e7eb !important; /* Tailwind gray-200 */
}

.ql-editor ul, .ql-editor ol {
    margin-left: 1.5em;
    padding-left: 1.5em;
}

.ql-editor ul ul,
.ql-editor ul ol,
.ql-editor ol ul,
.ql-editor ol ol {
    margin-left: 2em;
    padding-left: 2em;
}

#main-content ul, #main-content ol {
    padding-left: 0 !important;
    margin-left: 1.5em !important;
    list-style-position: inside !important;
}

#main-content li:not([class*="ql-indent-"]) { margin-left: 0; }
#main-content li.ql-indent-1 { margin-left: 2em; }
#main-content li.ql-indent-2 { margin-left: 4em; }
#main-content li.ql-indent-3 { margin-left: 6em; }
#main-content li.ql-indent-4 { margin-left: 8em; }